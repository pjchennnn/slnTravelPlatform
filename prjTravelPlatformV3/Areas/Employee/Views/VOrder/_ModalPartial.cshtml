@model prjTravelPlatformV3.Areas.Employee.ViewModels.Visa.VOrderViewModel


<div class="modal-header" onkeydown="pre(event);">
    <h5 class="modal-title" id="exampleModalLabel">@ViewBag.title</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div id="divModalContent" class="modal-body" onkeydown="pre(event);">
    <form id="@ViewBag.formId" class="overflow-auto">
        @Html.AntiForgeryToken()

        <input asp-for="FId" style="display:none" />
        <div style="padding:5px;">
            <div class="mb-3">
                <label asp-for="FProductId" class="form-label">@Html.DisplayNameFor(h => h.FProductId)</label>
                <select asp-for="FProductId" class="form-control" asp-items="@ViewBag.FProductId" onchange="getPrInEnByName(this.options[this.selectedIndex].text)">
                    <option value="0">請選擇商品</option>
                </select>
                <span asp-validation-for="FProductId" class="text-danger"></span>
            </div>
            <div class="mb-3">
                <label asp-for="FCustomerId" class="form-label">@Html.DisplayNameFor(h => h.FCustomerId)</label>
                <select asp-for="FCustomerId" class="form-control" asp-items="@ViewBag.FCustomerId">
                    <option value="0">請選擇購買會員姓名</option>
                </select>
                <span asp-validation-for="FCustomerId" class="text-danger"></span>
            </div>
            <div class="d-flex">
                <div class="mb-3 flex-grow-1" style="flex-basis:25%; margin-right:10px;">
                    <label asp-for="FPrice" class="form-label">@Html.DisplayNameFor(h => h.FPrice)</label>
                    <input asp-for="FPrice" class="form-control" readonly>
                    <span asp-validation-for="FPrice" class="text-danger"></span>
                </div>
                <div class="mb-3 flex-grow-1" style="flex-basis:25%; margin-right:10px;">
                    <label asp-for="FQuantity" class="form-label">@Html.DisplayNameFor(h => h.FQuantity)</label>
                    <input asp-for="FQuantity" class="form-control" readonly>
                    <span asp-validation-for="FQuantity" class="text-danger"></span>
                </div>
                <div class="mb-3 flex-grow-1" style="flex-basis:40%; margin-right:10px;">
                    <label asp-for="FCouponId" class="form-label">@Html.DisplayNameFor(h => h.FCouponId)</label>
                    <select asp-for="FCouponId" class="form-control" onchange="getTotal();" asp-items="@ViewBag.FCouponId">
                        <option value="0">請選擇使用優惠券</option>
                    </select>
                    <span asp-validation-for="FCouponId" class="text-danger"></span>
                </div>
                <div class="mb-3 flex-grow-1" style="flex-basis:20%;">
                    <label>總價</label>
                    <div class="d-flex justify-content-between align-items-center ml-1 border rounded" style="padding:7px 5px;"><h6 id="Total" class="m-0"></h6><h6 class="m-0 ml-1">元</h6></div>
                </div>
            </div>
            <div class="d-flex">
                <div class="mb-3 flex-grow-1" style="margin-right:15px;">
                    <label asp-for="FDepartureDate" class="form-label">@Html.DisplayNameFor(h => h.FDepartureDate)</label>
                    <input asp-for="FDepartureDate" class="form-control" onfocus="showDatePicker(this)">
                    <span asp-validation-for="FDepartureDate" class="text-danger"></span>
                </div>
                <div class="mb-3 flex-grow-1">
                    <label asp-for="FMemo" class="form-label">@Html.DisplayNameFor(h => h.FMemo)</label>
                    <textarea asp-for="FMemo" class="form-control"></textarea>
                    <span asp-validation-for="FMemo" class="text-danger"></span>
                </div>
            </div>
            <div class="mb-3 d-none" id="SorD">
                <input type="radio" id="selfPick" name="SorD" value="S" checked onchange="SorDToggle(this.value)" /><label for="S">自取</label>
                <input type="radio" id="delivery" name="SorD" value="D" onchange="SorDToggle(this.value)" /><label for="D">配送</label>
                <input asp-for="FForPickupOrDeliveryAddress" class="form-control d-none">
                <span asp-validation-for="FForPickupOrDeliveryAddress" class="text-danger"></span>
            </div>
            <div class="mb-3 d-none" id="interview">
                <label asp-for="FInterviewReminder" class="form-label">@Html.DisplayNameFor(h => h.FInterviewReminder)</label>
                <input asp-for="FInterviewReminder" class="form-control">
                <span asp-validation-for="FInterviewReminder" class="text-danger"></span>
            </div>
            <div class="d-flex">
                <div class="mb-3 flex-grow-1" style="padding-right:20px;">
                    <label asp-for="FStatusId" class="form-label">@Html.DisplayNameFor(h => h.FStatusId)</label>
                    <select asp-for="FStatusId" class="form-control" asp-items="@ViewBag.FStatusId">
                        <option value="0">請選擇訂單狀態</option>
                    </select>
                    <span asp-validation-for="FStatusId" class="text-danger"></span>
                </div>
                <div class="mb-3 flex-grow-1">
                    <label asp-for="FEvaluate" class="form-label">@Html.DisplayNameFor(h => h.FEvaluate)</label>
                    <select asp-for="FEvaluate" class="form-control">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                    <span asp-validation-for="FEvaluate" class="text-danger"></span>
                </div>
            </div>



            <div class="mb-3 flex-grow-1" style="padding-right:20px;">
                <div class="d-flex;">
                    <label asp-for="TVtravelerInfos" class="form-label">@Html.DisplayNameFor(h => h.TVtravelerInfos)</label>
                    <button onclick="newTr();" class="btn btn-info" style="padding:8px 8px; margin:0 0 8px 4px;"><i class="fa-solid fa-circle-plus" style="font-size:0.8rem;"></i> 新增</button>
                    <button onclick="minusTr();" class="btn btn-danger btn-sm" style="padding:8px 8px; margin:0 0 8px 4px;"><i class="fa-solid fa-trash" style="font-size:0.8rem"></i> 減少</button>
                </div>


                <div id="travelerPartial">

                </div>


            </div>



        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
            <button type="button" class="btn btn-primary" id="btnSave" onclick='sendFetchRequest("@ViewBag.formId")'>儲存</button>
        </div>
    </form>
</div>


@section Scripts {

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    


    <script>
        
    </script>
}
